rawInput â† â€¢file.Lines "input"

FSplitString â† ((âŠ¢-ËœÂ¬Ã—+`)âˆ˜=âŠ”âŠ¢)
FStringToInt â† +Â´((âŒ½10â‹†â†•âˆ˜â‰ )Ã—-âŸœ'0')

input â† >(' 'âŠ¸FSplitString)âˆ˜(1âŠ¸â†“)âˆ˜(1âŠ¸âŠ‘)âˆ˜('|'âŠ¸FSplitString)Â¨ rawInput
signal â† >(' 'âŠ¸FSplitString)âˆ˜âŠ‘âˆ˜('|'âŠ¸FSplitString)Â¨ rawInput

#number segments
#1      2
#4      4
#7      3
#8      7

# part 1
FCheckInstances â† {+Â´â¥Šğ•¨=âŒœğ•©}
+Â´2â€¿4â€¿3â€¿7âŠ¸FCheckInstancesË˜â‰ Â¨input

## default encoding
# a,b,c,d,e,f,g
# 0,1,2,3,4,5,6
# below are all the digits encodings
digit1 â† âŸ¨0,0,1,0,0,1,0âŸ©
digit4 â† âŸ¨0,1,1,1,0,1,0âŸ©
digit7 â† âŸ¨1,0,1,0,0,1,0âŸ©
digit8 â† âŸ¨1,1,1,1,1,1,1âŸ©

digit2 â† âŸ¨1,0,1,1,1,0,1âŸ©
digit3 â† âŸ¨1,0,1,1,0,1,1âŸ©
digit5 â† âŸ¨1,1,0,1,0,1,1âŸ©

digit0 â† âŸ¨1,1,1,0,1,1,1âŸ©
digit6 â† âŸ¨1,1,0,1,1,1,1âŸ©
digit9 â† âŸ¨1,1,1,1,0,1,1âŸ©

digitEncodingsFull â‡ âŸ¨digit0,digit1,digit2,digit3,digit4,digit5,digit6,digit7,digit8,digit9âŸ©

# how to find non-intersection of w
# "dab"(Â¬âˆ˜âˆŠ/âŠ£)"ab"
#"d"
# "aceg"(Â¬âˆ˜âˆŠ/âŠ£)"dgea"
#"c"
#   "ceg"(Â¬âˆ˜âˆŠ/âŠ£)"dgea"
#"c"
#   "ceg"(Â¬âˆ˜âˆŠ/âŠ£)"dgec"
#âŸ¨âŸ©

# example
#   câ†âˆ¾"cbdgef"â€¿"fgaecd"â€¿"agebfd"
#"cbdgeffgaecdagebfd"
#   (2=â‰ Â¨âŠâŠ¸âŠ”c)/(â·c)
#"cba"
#   ({2=â‰ Â¨âŠâŠ¸âŠ”ğ•©}/â·) c
#"cba"

# order signal by character length
signal â†© (â‹Ë˜â‰ Â¨)âŠ¸(âŠË˜)signal

# first step - from digit 1(2) and 7(3), find out 'a' (code 0)
#encoding â† (1âŠ‘Ë˜signal)(Â¬âˆ˜âˆŠ/âŠ£)Ë˜(âŠ‘Ë˜signal)
encodingA â† (1âŠ¸âŠ‘(Â¬âˆ˜âˆŠ/âŠ£)âŠ‘)Ë˜signal

# step 2 - get the ones with 6 characters - potential digit 6,9 or 0
# find out - 'c' (code 2) and 'f' (code 5)
potentialSegs â† ({2=â‰ Â¨âŠâŠ¸âŠ”ğ•©}/â·)âˆ˜âˆ¾âˆ˜(6â€¿7â€¿8âŠ¸âŠ)Ë˜ signal
digit1segs â† âŠ‘Ë˜signal
encodingC â† potentialSegs (âˆŠ/âŠ£)Ë˜ digit1segs
encodingF â† digit1segs (Â¬âˆ˜âˆŠ/âŠ£)Ë˜ encodingC

# step 3
# find out - 'd' (code 3) and 'b' (code 1)
digit4segs â† 2âŠ‘Ë˜signal
encodingD â† encodingC (Â¬âˆ˜âˆŠ/âŠ£)ËœË˜ digit4segs (âˆŠ/âŠ£)Ë˜ potentialSegs
encodingB â† digit4Segs (Â¬âˆ˜âˆŠ/âŠ£)Ë˜ (encodingDâˆ¾Ë˜digit1segs)

# step 4
# find out - 'e' (code 4) and 'g' (code 6)
encodingE â† potentialSegs (Â¬âˆ˜âˆŠ/âŠ£)Ë˜(encodingCâˆ¾Ë˜encodingD)
digit8segs â† 9âŠ‘Ë˜signal
encodingLeftG â† âˆ¾Ë˜Â´encodingAâ€¿encodingBâ€¿encodingCâ€¿encodingDâ€¿encodingEâ€¿encodingF
encodingG â† digit8segs (Â¬âˆ˜âˆŠ/âŠ£)Ë˜ encodingLeftG
encodingFull â† encodingLeftG âˆ¾Ë˜ encodingG

# how to decode?
# for 1st e.g. if found the encoding is "deafgbc" 
# or âŸ¨3,4,0,5,6,1,2âŸ©
# to get the encoding for digit 3
# âŸ¨1,0,1,1,0,1,1âŸ©/âŸ¨3,4,0,5,6,1,2âŸ© = âŸ¨ 3 0 5 1 2 âŸ© 
# which is dafbc
decodedOutputâ‡(<Ë˜encodingFull)âˆŠÂ¨Ë˜ input

â€¢Show +Â´1000â€¿100â€¿10â€¿1 Ã—Â¨+Ë{âŠ‘digitEncodingsFullâŠ<ğ•©}Â¨decodedoutput

